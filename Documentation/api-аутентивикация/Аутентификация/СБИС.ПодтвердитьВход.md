# СБИС.ПодтвердитьВход

Команда «СБИС.ПодтвердитьВход» — вторая фаза двухфакторной аутентификации. Метод позволяет получить сессию с помощью кода подтверждения от команды «СБИС.ОтправитьКодАутентификации».

## Адрес запроса

https://online.sbis.ru/auth/service/

## Параметры запроса

| Параметр | Тип | Описание |
|----------|-----|----------|
| Идентификатор | строка |  |
| Код | строка |  |

## Результат

| Параметр | Тип | Описание |
|----------|-----|----------|
| Строка | строка | идентификатор сессии |

## Комментарий

Значение идентификатора для запроса можно получить из поля «Идентификатор» в «addinfo» в ответе двухфакторной аутентификации.

Перед вызовом методов подтверждения телефона убедитесь, что в заголовках запроса указано поле «X-SBISSessionID» со значением временной сессии (значение из поля «ИдентификаторСессии» в «addinfo»).

## Пример запроса

```json
{
   "jsonrpc": "2.0",
   "method": "СБИС.ПодтвердитьВход",
   "params": {
      "Идентификатор": "dbef1dbb-1501-4f57-8783-0fc3f9c3b98d",
      "Код": "72344"
   },
   "id": 0
}
```



## Пример ответа (аутентификация по логину/паролю)

```json
{
   "jsonrpc": "2.0",
   "result": "dbef1dbb-1501-4f57-8783-0fc3f9c3b98d",
   "id": 0
}
```



## Пример ответа (аутентификация по сертификату)

```json
{
   "jsonrpc": "2.0",
   "result": "MIIBYwYJKoZIhvcNAQcDoIIBVDCCAVACAQAxgfUwgfICAQAwJTAXMRUwEwYDVQQDEwxDQS1TQklTLVRFU1QCCn9qUgMAAQAABZYwHAYGKoUDAgITMBIGByqFAwICJAAGByqFAwICHgEEgacwgaQwKAQgQuAUHdpfjODY75hi7P8mSiwm4S9D4z33H8h4TYSoVbUEBGrMX5GgeAYHKoUDAgIfAaBjMBwGBiqFAwICEzASBgcqhQMCAiQABgcqhQMCAh4BA0MABEAOHiDLTeQwF6ftet3M/lRaWu+URgR/RX7ckuz/1JfZeknjbNzRqVpa0HAjBBpcDFi/jChTRvMcjxlov0laI4SgBAg95YHmsFapLzBTBgkqhkiG9w0BBwEwHQYGKoUDAgIVMBMECBCjEelVtBygBgcqhQMCAh8BgCdX4Mfu1QgNgyLavyP5yaMcvWfxQZb0nutV/881ZHLUijrEXX9G0S4=",
   "id": 0
}
```



## Пример ответа (неверный идентификатор)

```json
{
   "jsonrpc": "2.0",
   "error": {
      "code": -32000,
      "message": "Ошибка аутентификации",
      "details": "Ошибка восстановления состояния аутентификации. Данные по ключу vcode-0057be7f-005d9ed3-0bba-87bd7c39de744d73 не найдены.",
      "type": "warning",
      "data": {
         "classid": "{afd28339-dc44-4ad9-96dc-55a9789c743a}",
         "error_code": 0,
         "addinfo": null
      }
   },
   "id": 0
}
```



## Пример запроса (неверный код)

```json
{
   "jsonrpc": "2.0",
   "method": "СБИС.ПодтвердитьВход",
   "params": {
      "Идентификатор": "98deff1d-b114-4a62-850d-75620ac45bc7",
      "Код": "72344"
   },
   "id": 0
}
```



## Пример ответа (идентификатор устарел)

```json
{
   "jsonrpc": "2.0",
   "error": {
      "code": -32000,
      "message": "Полученный Вами код подтверждения или ссылка устарели! Чтобы выполнить запрашиваемое действие, Вам необходимо получить новый код подтверждения!",
      "details": "Нет информации о коде подтверждения для данного пользователя!",
      "type": "warning",
      "data": {
         "classid": "{afd28339-dc44-4ad9-96dc-55a9789c743a}",
         "error_code": 0,
         "addinfo": null
      }
   },
   "id": 0
}